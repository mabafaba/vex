<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Vex Component Test</title>
    <!-- Include Socket.io client library with direct URL to ensure proper loading -->
    <script src="http://localhost:3005/socket.io/socket.io.js"></script>
    <script>
        // Add debugging for Socket.io connection
        window.addEventListener('DOMContentLoaded', () => {
            console.log('Checking if Socket.io is loaded:', typeof io !== 'undefined');
        });
    </script>
    <script src="./vexcomponent.js"></script>
    <script src="./vexinputcomponent.js"></script>
    <script src="./geoscaleinputcomponent.js"></script>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 30px;
            background: #acc3c5;
        }
    </style>
</head>
<body>
    <!-- The component will load itself using the vex-id attribute -->
    <vex-display vex-id="67e9be3f916e679e97067e66" view-mode="thread"></vex-display>
    
    <div id="connection-status" style="position: fixed; bottom: 10px; right: 10px; padding: 5px; background: #f0f0f0; border: 1px solid #ccc;">
        Socket.io: <span id="socket-status">Checking...</span>
    </div>

    <script>
        // Simple connection indicator
        function updateConnectionStatus() {
            const statusSpan = document.getElementById('socket-status');
            if (typeof io === 'undefined') {
                statusSpan.textContent = 'Library not loaded';
                statusSpan.style.color = 'red';
                return;
            }
            
            const socket = io(window.location.hostname + ':3005', {
                path: '/socket.io',
                transports: ['websocket', 'polling'],
                autoConnect: false
            });
            
            socket.on('connect', () => {
                statusSpan.textContent = 'Connected';
                statusSpan.style.color = 'green';
            });
            
            socket.on('connect_error', (error) => {
                statusSpan.textContent = `Error: ${error.message}`;
                statusSpan.style.color = 'red';
                console.error('Socket connection error:', error);
            });
            
            socket.on('disconnect', () => {
                statusSpan.textContent = 'Disconnected';
                statusSpan.style.color = 'orange';
            });
            
            socket.connect();
        }
        
        // Update connection status after a short delay
        setTimeout(updateConnectionStatus, 1000);
    </script>
</body>
</html>